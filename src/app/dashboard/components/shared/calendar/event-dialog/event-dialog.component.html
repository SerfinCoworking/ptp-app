<div class="d-flex align-items-center justify-content-between">

  <h5 class="mr-5"> {{ data.employeeEvent.employee.lastName }} {{ data.employeeEvent.employee.firstName }}</h5>
  <h5>{{ data.employeeEvent.events[0].fromDatetime | date:"EEEE d, y" }}</h5>
</div>

<mat-dialog-content>
  <div class="d-flex">
    <div class="avatar-cotainer mr-2">
      <img [src]="data.employeeEvent.employee.avatar" alt="" *ngIf="data.employeeEvent.employee.avatar">
      <div *ngIf="!data.employeeEvent.employee.avatar" class="initials-name">
        {{ data.employeeEvent.employee.lastName | firstLetter }} {{ data.employeeEvent.employee.firstName | firstLetter }}
      </div>

    </div>
    <div *ngFor="let event of events; let eIndex = index">

      <div class="d-flex align-items-center justify-content-start mb-2 w-100">
        <div class="mr-2">
          {{ event.fromDatetime | date:"HH:mm" }}
        </div>
        
        <div class="mr-2 d-flex" *ngIf="event.checkin">
          <div>{{ event.checkin | date:"HH:mm" }}</div>
          <div class="ml-2">{{ eventsValue[eIndex].checkinDescription }}</div>
        </div>
      
        <!-- selector de hora -->
        <ng-container *ngIf="!event.checkin">

          <div class="d-flex align-items-center" *ngIf="displayTimeSelector[eIndex]['checkin']">
            <ngb-timepicker [(ngModel)]="eventsValue[eIndex].checkin.time" [spinners]="spinners"></ngb-timepicker>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Descripci贸n ingreso</mat-label>
              <textarea matInput [(ngModel)]="eventsValue[eIndex].checkinDescription" placeholder="descripci贸n ingreso"></textarea>
            </mat-form-field>

            <button mat-stroked-button class="btn btn-sm btn-success ml-2" (click)="setCheckin(eIndex)">
              <fa-icon [icon]="faCheck"></fa-icon>
            </button>
            <button mat-stroked-button class="btn btn-sm btn-danger ml-2" (click)="toggleCITimeSelector(eIndex)">
              <fa-icon [icon]="faTimes"></fa-icon>
            </button>
          </div>
          <button 
          mat-stroked-button 
          class="btn-success" 
          (click)="toggleCITimeSelector(eIndex)" 
          *ngIf="!displayTimeSelector[eIndex]['checkin']">
          Marcar Ingreso</button>
        </ng-container>

      </div>
      <div class="d-flex align-items-center justify-content-center mb-2 w-100">
        <div class="mr-2">
          {{ event.toDatetime | date:"HH:mm" }}
        </div>

        <div class="mr-2 d-flex" *ngIf="event.checkout">
          <div>{{ event.checkout | date:"HH:mm" }}</div>
          <div class="ml-2">{{ eventsValue[eIndex].checkoutDescription }}</div>
        </div>
      
        <!-- selector de hora -->
        <ng-container *ngIf="!event.checkout">

          <div class="d-flex align-items-center" *ngIf="displayTimeSelector[eIndex]['checkout']">
            <ngb-timepicker [(ngModel)]="eventsValue[eIndex].checkout.time" [spinners]="spinners"></ngb-timepicker>

            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Descripci贸n egreso</mat-label>
              <textarea matInput [(ngModel)]="eventsValue[eIndex].checkoutDescription" placeholder="descripci贸n egreso"></textarea>
            </mat-form-field>

            <button mat-stroked-button class="btn btn-sm btn-success ml-2" (click)="setCheckout(eIndex)">
              <fa-icon [icon]="faCheck"></fa-icon>
            </button>
            <button mat-stroked-button class="btn btn-sm btn-danger ml-2" (click)="toggleCOTimeSelector(eIndex)">
              <fa-icon [icon]="faTimes"></fa-icon>
            </button>
          </div>
          <button 
          mat-stroked-button 
          class="btn-success" 
          (click)="toggleCOTimeSelector(eIndex)" 
          *ngIf="!displayTimeSelector[eIndex]['checkout']">
          Marcar Egreso</button>
        </ng-container>


      </div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions class="confirm-dialog d-flex w-100 justify-content-end">
  <button class="mat-raised-button" (click)="close()">Cancelar</button>
  <button class="mat-raised-button bg-success text-white" (click)="confirm()">Guardar</button>
</mat-dialog-actions>
