<mat-card>
  <mat-card-header>
    <h5>{{isEdit ? 'Editar usuario' : 'Nuevo usuario'}}</h5>
  </mat-card-header>

  <mat-card-content>

    <form [formGroup]="userForm" #userNgForm="ngForm" id="ngForm" (ngSubmit)="isEdit ? updateClickEvent(userNgForm) : saveClickEvent(userNgForm)">
      <div class="d-flex">
        <div class="w-50">

          <div class="d-flex w-100">
            <mat-form-field appearance="fill" class="w-50 p-1">
              <mat-label>Nombre de usuario</mat-label>
              <input matInput [formControl]="username" required>

              <mat-error *ngIf="username.errors?.required">
                Debe ingresar el nombre de usuario
              </mat-error>
            </mat-form-field>

          <!-- </div>
          <div class="d-flex w-100"> -->
            <mat-form-field appearance="fill" class="w-50 p-1">
              <mat-label>Contraseña</mat-label>
              <input matInput [type]="hide ? 'password' : 'text'" [formControl]="password" [required]="!isEdit">
              <button mat-icon-button matSuffix type="button" (click)="hide = !hide" [attr.aria-label]="'Ocultar contraseña'" [attr.aria-pressed]="hide">
                <fa-icon [icon]="faEyeSlash" *ngIf="hide"></fa-icon>
                <fa-icon [icon]="faEye" *ngIf="!hide"></fa-icon>
              </button>
              <mat-error *ngIf="password.errors?.required">
                Debe ingresar una contraseña
              </mat-error>
            </mat-form-field>

            <!-- <mat-form-field appearance="fill" class="w-50 p-1">
              <mat-label>Repetir contraseña</mat-label>
              <input matInput [type]="hide ? 'password' : 'text'" [formControl]="password" [required]="!isEdit">
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Ocultar contraseña'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="password.errors?.required">
                Debe ingresar una contraseña
              </mat-error>
              <mat-error *ngIf="email.errors?.invalid">
                {{ email.errors.invalid }}
              </mat-error>
            </mat-form-field> -->
          </div>
          
          <div class="d-flex w-100">
            <mat-form-field appearance="fill" class="w-100 p-1">
              <mat-label>Email</mat-label>
              <input matInput placeholder="juan@example.com" [formControl]="email" required>
              <mat-error *ngIf="email.errors?.required">
                Debe ingresar el email del usuario
              </mat-error>
              <mat-error *ngIf="email.errors?.invalid">
                {{ email.errors.invalid }}
              </mat-error>
            </mat-form-field>
          </div>

          <div class="d-flex w-100">
            <mat-form-field appearance="fill" class="w-100 p-1">
              <mat-label>Código RFID</mat-label>
              <input matInput placeholder="Escanee la tarjeta" [formControl]="rfid" required>
              <mat-error *ngIf="rfid.errors?.required">
                Debe ingresar el código RFID
              </mat-error>
              <mat-error *ngIf="rfid.errors?.invalid">
                {{ rfid.errors.invalid }}
              </mat-error>
            </mat-form-field>
          </div>

          <h3>Perfil</h3>

          <div class="d-flex w-100">
            <div formGroupName="profile" class="w-100">


              <div class="d-flex w-100">
                <mat-form-field appearance="fill" class="w-50 p-1">
                  <mat-label>Nombre</mat-label>
                  <input matInput placeholder="Juan" [formControl]="firstName" required>
  
                  <mat-error *ngIf="firstName.errors?.required">
                    Debe ingresar el nombre del empleado
                  </mat-error>
                </mat-form-field>
  
                <mat-form-field appearance="fill" class="w-50 p-1">
                  <mat-label>Apellido</mat-label>
                  <input matInput placeholder="Perez" [formControl]="lastName" required>
                  <mat-error *ngIf="lastName.errors?.required">
                    Debe ingresar el apellido del empleado
                  </mat-error>
                </mat-form-field>
              </div>
  
              <div class="d-flex w-100">
                <mat-form-field appearance="fill" class="w-50 p-1">
                  <mat-label>Dni</mat-label>
                  <input matInput [formControl]="dni" required>
                  <mat-error *ngIf="dni.errors?.required">
                    Debe ingresar el dni del empleado
                  </mat-error>
                </mat-form-field>
              </div>


            </div>
          </div>

        </div>

        <div class="w-50">
          <div class="text-center w-100">
            <img [src]="avatar.value" *ngIf="avatar.value">
            <div class="avatar-container" *ngIf="!avatar.value">
              <fa-icon [icon]="faUser" ></fa-icon>
            </div>
          </div>
          <div class="w-100">
            <mat-form-field appearance="fill" class="w-100 p-2">
              <mat-label>Avatar</mat-label>
              <input matInput [formControl]="avatar">
            </mat-form-field>
          </div>
        </div>
      </div>      
    </form>
    
  </mat-card-content>
  <mat-card-footer>
    <div class="form-card pt-3 pb-0 d-flex align-items-center justify-content-end">
      <app-back-button class="ml-1 mr-1"></app-back-button>
      <button form="ngForm" class="btn btn-success ml-1 mr-1">Guardar</button>
    </div>
  </mat-card-footer>
</mat-card>
